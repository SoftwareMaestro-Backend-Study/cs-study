### ARP

- Address Resolution Protocol 약자
- IP 주소를 MAC 주소와 매칭 시키기 위한 프로토콜
    - 논리 주소인 IP 주소를 (L3, 네트워크 계층) 실제적인 물리 주소인 MAC 주소 (L2, 데이터링크 계층)으로 바꾸어주는 역할
    - 반대로 MAC 주소를 통해 IP 주소를 알아내는 프로토콜을 RARP 프로토콜이라고 한다. (거의 사용 X)
- 로컬 네트워크(LAN)에서 단말과 단말 간 통신을 하기 위해서 IP 주소와 함께 MAC 주소를 이용하게 되는데, IP 주소를 MAC Address와 매칭하여 목적지 IP 의 단말이 소유한 MAC 주소를 제대로 찾기 위함.

<br/>

### LAN

- 근거리 통신망 (같은 IP 대역을 공유)
- ARP Request가 미치는 영역
    - ARP Request Packet이 전달되기만 하면 LAN
- 같은 IP 대역을 공유하는 LAN에서 단말간 통신을 하기 위해서는 IP 주소를 통해 목적지를 지정하지만 실제로는 MAC 주소를 이용해 목적지를 찾는다.
    - IP, MAC을 둘 다 사용하여 목적지를 찾는다.

<br/>

### MAC 주소

- 데이터 링크에서 통신을 위한 네트워크 인터페이스에 할당된 고유 식별자
    - LAN에서 목적지와 통신하기 위한 실질적인 주소
    - Network Interface Card(NIC)를 가진 단말이면, 공장에서 출고할 때 부여되고 평생 사용하는 고유의 값
    - 모든 네트워크 장비와 컴퓨터가 갖는 NIC마다 MAC 주소를 가지고 있다.
        - 하드웨어에 할당된 고유 실별번호 주소
    - 논리적 주소가 IP라면, MAC 주소는 물리적 주소와 같다.
        - IP 주소는 변화지만, MAC은 변하지 않는다.

<br/>

### IP 주소만으로는 통신이 불가능한 이유

- IP는 가변적이기 때문에 바뀔 수 있다.

<br/>

### MAC 주소만으로 통신이 불가능한 이유

- 라우터에 통신을 할 수 있는 전 서계의 모든 PC의 MAC 주소를 다 등록해야한다.
- 라우터에 다 저장하는 것은 불가능하다.
- 따라서 여러대의 PC를 묶어서 IP 주소를 만들고 MAC 주소를 거치게 하여 통신한다.
  ⇒ ARP

<br/>

### ARP

- 단말간 통신에서 양쪽 단말은 IP를 이용하여 목적지를 지정하지만, 실제 데이터 이동은 MAC 주소를 함께 이용한다.
    - 이때 ARP가 필요하다.
    - IP 주소와 MAC 주소를 일대일 매칭하여 LAN에서 목적지를 잘 찾아갈 수 있도록 돕는다.
- ARP Table
    - IP 주소와 MAC 주소를 1대1로 대응하여 테이블로 정리하여 목적지 IP에 맞는 MAC 주소로 전달
    - IP 주소와 MAC 주소를 일대일 매칭시킨 정보를 정리해둔 Table

<br/>

### ARP 동작 방식

- 송신자는 목적지 IP Address를 지정해 패킷 송신
- IP 프로토콜이 ARP 프로토콜에게 ARP Request 메서지를 생성하도록 요청
    - 네트워크 계층 (L3) → 데이터 링크계층 (L2)
- 메시지는 데이터링크 계층으로 전달되고 이더넷 프레임으로 캡슐화 된다.
- 모든 호스트와 라우터는 프레임을 수신 후 자신의 ARP 프로토콜에게 전달
- 목적지 IP Address가 일치하는 시스템은 자신의 물리주소를 포함하고 있는 ARP Reply 메시지를 보낸다.
- 최초 송신 측은 지정한 IP Address에 대응하는 물리 주소를 획득한다.

<img width="408" alt="image" src="https://github.com/SoftwareMaestro-Backend-Study/cs-study/assets/71378475/56c2b511-cf5d-49f0-b652-7435af451770">
